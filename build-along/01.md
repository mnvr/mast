**10 Jan 2024**

[Create a GitHub
Codespace](https://github.com/mastodon/mastodon#github-codespaces)

This uses the information that defined in the `.devcontainer` folder within
the Mastodon repository to bring up a VM.

Building the VM takes a while. It ran into an error during post-create.sh step
somewhere, and instead created a recovery container.

Shows a web based VS Code with the mastodon source, and the error:

> This codespace is currently running in recovery mode due to a configuration
  error. Please review the creation logs, update your dev container
  configuration as needed, and run the "Rebuild Container" command to rectify.

The error seemed to be in the `rails assets:precompile` step (we can see the
full script at `.devcontainer/post-create.sh` in the VS code instance that has
opened up).

It's called precompile, let's see if the thing works without it too.

Run

```sh
$ foreman start -f Procfile.dev
foreman: command not found
```

Issue:
* Failed to setup dev env following README
  (https://github.com/mastodon/mastodon/issues/27398)
* Other similar ones...

[Docs for codespaces](https://docs.github.com/en/codespaces)

It is probably not finding foreman because we're in the recovery container.
Let's comment out the `set -e` from `post-create.sh`. VS Code helpfully asks if
we want to rebuild (thank you Clippy!). It also tells us

> Rebuilding recreates your codespace. Currently cached images will be
> preserved, together with your code and any current changes. Your codespace
> will be rebuilt using your working directory's dev container.
