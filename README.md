# mast

Mastodon Theme Generator

Live version: [mnvr.github.io/mast](https://mnvr.github.io/mast/)

This is not a solid solution, it is just a prototype, and will likely not
produce CSS that works in all cases. If you do use it, please try to ensure that
there is good contrast between text and background.

## Previewing

Mastodon's CSS is complex. And there is a lot of it. 14000 lines (and that's
just with the default theme).

So the full impact of the CSS generated by us can only really be seen in a real
context. That said, you might want to preview it on a test instance.

An easy(-ish) way to set up a test instance is to use a GitHub Codespace, using
the instructions in [Mastodon's
README](https://github.com/mastodon/mastodon#github-codespaces). This'll create
a new VM running a Mastodon instance without needing to install anything on your
computer.

> As of writing, the README instructions didn't work - the codespace launched in
> recovery mode. To fix this, I had to edit `.devcontainer/post-create.sh`
> (within the codespace itself) and comment out the following line at the end of
> the file:
>
> ```sh
> RAILS_ENV=test ./bin/rails assets:precompile
> ```
>
> If you edit the file, VS Code's clippy will helpfully ask you if you wish to
> restart with the changes. Say yes, and that should fix the issue.

To login to your test instance, use

* Email `admin@<domain>`, where `<domain>` is where your codespace is running.
  So this'll be something like `admin@xxx-3000.app.github.dev`.
* Password `mastodonadmin`

## Running the generator locally

The site is a [single† HTML file](docs/index.html), hosted on GitHub pages. To
run locally, you can clone the repository and open the HTML file in your
browser.

<small>† for convenience of bugfixes, the [template CSS](docs/template.css) is
in a separate file, but you can hardcode its contents in the HTML too.</small>

A bit more convenient might be using a live reload tool. I used [Five
server](https://github.com/yandeu/five-server-vscode) when making this.

### Tips

The browser's CSS inspector is our friend. And under the sources tab we can find
a `default-xxx.chunk.css` - this is what our `template.css` is derived from.

Mastodon itself generates the CSS from SASS files, which can be found in the
Mastodon source under
[app/javascript/styles/](https://github.com/mastodon/mastodon/tree/main/app/javascript/styles).

